<?xml version="1.0" encoding="UTF-8"?>
<!--
 * SPDX-FileCopyrightText: (c) 2003-2025 The Apache Software Foundation (ASF) and contributors.
 * SPDX-FileCopyrightText: (c) 2025 Liferay, Inc.
 * SPDX-License-Identifier: Apache-2.0
 -->
<web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
		 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee
                      https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd"
		 version="6.0">

	<display-name>Liferay Plutonium Portal Driver</display-name>

	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>/WEB-INF/plutonium-portal-driver-services-config.xml</param-value>
	</context-param>

	<filter>
		<filter-name>plutoPortalDriver</filter-name>
		<filter-class>com.liferay.plutonium.driver.PortalDriverFilter</filter-class>
		<async-supported>true</async-supported>
	</filter>

	<filter>
		<filter-name>springSecurityFilterChain</filter-name>
		<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
		<async-supported>true</async-supported>
	</filter>

	<filter-mapping>
		<filter-name>springSecurityFilterChain</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

	<filter-mapping>
		<filter-name>plutoPortalDriver</filter-name>
		<url-pattern>/about.jsp</url-pattern>
	</filter-mapping>

	<filter-mapping>
		<filter-name>plutoPortalDriver</filter-name>
		<url-pattern>/about.jsp/*</url-pattern>
	</filter-mapping>

	<listener>
		<listener-class>com.liferay.plutonium.driver.PortalStartupListener</listener-class>
	</listener>

	<servlet>
		<description>Plutonium Portal Driver Controller</description>
		<display-name>Plutonium Portal Driver</display-name>
		<servlet-name>plutoPortalDriver</servlet-name>
		<servlet-class>com.liferay.plutonium.driver.PortalDriverServlet</servlet-class>
		<async-supported>true</async-supported>
		<multipart-config>
			<file-size-threshold>1048576</file-size-threshold>
		</multipart-config>
	</servlet>

	<servlet>
		<description>Plutonium Portal Driver Logout</description>
		<display-name>Plutonium Portal Driver</display-name>
		<servlet-name>plutoPortalDriverLogout</servlet-name>
		<servlet-class>com.liferay.plutonium.driver.PortalDriverLogoutServlet</servlet-class>
		<async-supported>true</async-supported>
	</servlet>

	<servlet>
		<description>Portlet Application Publisher Service</description>
		<display-name>Portlet Application Publisher</display-name>
		<servlet-name>portletApplicationPublisher</servlet-name>
		<servlet-class>com.liferay.plutonium.driver.PublishServlet</servlet-class>
	</servlet>

	<servlet>
		<description>Plutonium TCK Driver Controller</description>
		<display-name>Plutonium TCK Driver</display-name>
		<servlet-name>tckDriver</servlet-name>
		<servlet-class>com.liferay.plutonium.driver.TCKDriverServlet</servlet-class>
	</servlet>

	<servlet>
		<servlet-name>AboutPortlet</servlet-name>
		<servlet-class>com.liferay.plutonium.container.driver.PortletServlet</servlet-class>
		<init-param>
			<param-name>portlet-name</param-name>
			<param-value>AboutPortlet</param-value>
		</init-param>
		<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet>
		<servlet-name>AdminPortlet</servlet-name>
		<servlet-class>com.liferay.plutonium.container.driver.PortletServlet</servlet-class>
		<init-param>
			<param-name>portlet-name</param-name>
			<param-value>AdminPortlet</param-value>
		</init-param>
		<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet>
		<servlet-name>PlutoniumPageAdmin</servlet-name>
		<servlet-class>com.liferay.plutonium.container.driver.PortletServlet</servlet-class>
		<init-param>
			<param-name>portlet-name</param-name>
			<param-value>PlutoniumPageAdmin</param-value>
		</init-param>
		<load-on-startup>1</load-on-startup>
	</servlet>

	<servlet-mapping>
		<servlet-name>plutoPortalDriver</servlet-name>
		<url-pattern>/portal/*</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>plutoPortalDriverLogout</servlet-name>
		<url-pattern>/Logout</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>portletApplicationPublisher</servlet-name>
		<url-pattern>/admin/Publish</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>tckDriver</servlet-name>
		<url-pattern>/tck/*</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>AboutPortlet</servlet-name>
		<url-pattern>/PlutoniumInvoker/AboutPortlet</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>AdminPortlet</servlet-name>
		<url-pattern>/PlutoniumInvoker/AdminPortlet</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>PlutoniumPageAdmin</servlet-name>
		<url-pattern>/PlutoniumInvoker/PlutoniumPageAdmin</url-pattern>
	</servlet-mapping>

	<jsp-config>
		<taglib>
			<taglib-uri>http://liferay.com/plutonium</taglib-uri>
			<taglib-location>/WEB-INF/tld/plutonium.tld</taglib-location>
		</taglib>
	</jsp-config>

	<security-constraint>
		<web-resource-collection>
			<web-resource-name>portal</web-resource-name>
			<url-pattern>/portal</url-pattern>
			<url-pattern>/portal/*</url-pattern>
		</web-resource-collection>
		<auth-constraint>
			<role-name>plutonium</role-name>
		</auth-constraint>
	</security-constraint>

	<login-config>
		<auth-method>FORM</auth-method>
		<form-login-config>
			<form-login-page>/login.jsp</form-login-page>
			<form-error-page>/login.jsp?error=1</form-error-page>
		</form-login-config>
	</login-config>

	<security-role>
		<role-name>plutonium</role-name>
	</security-role>

</web-app>
